{% load forms utils %}

<fieldset class="{% if title %}with-title{% else %}without-title{% endif %}{% if class %} {{ class }}{% endif %}">
	{% if title %}<legend>{{ title }}</legend>{% endif %}
	{% block above-form %}{% endblock %}
	{% for field_name_or_names in fields %}
		<div class="inner-content">
			{% with field_names=field_name_or_names|to_list %}
				<p class="form-group {{ field_names|join:' '}}">
				{% for field_name in field_names %}
					{% with field=form|get_field:field_name %}
						<span class="field {{ field_name }}">
							{% if not field.is_hidden %}
								<label for="{{ field.auto_id }}">
									{{ field.label|capfirst }}
									{% if field.field.required %}
										<span class="required">*</span>
									{% endif %}
								</label>
								{{ field }}
								{{ field.errors }}
							{% else %}
								{{ field }}
							{% endif %}
						</span>
					{% endwith %}
				{% endfor %}
				</p>
			{% endwith %}
		</div>
	{% empty %}
		<div class="inner-content"></div>
	{% endfor %}
	{% block below-form %}{% endblock %}
</fieldset>
